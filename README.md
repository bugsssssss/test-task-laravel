# üìÅ File Upload API

## üîê –ê—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—è

> ‚ö†Ô∏è –í —Ç–µ–∫—É—â–µ–π –≤–µ—Ä—Å–∏–∏ API –Ω–µ —Ç—Ä–µ–±—É–µ—Ç –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–∏.

---

## üßæ –û–±–∑–æ—Ä –º–∞—Ä—à—Ä—É—Ç–æ–≤

| ‚Ññ | –î–µ–π—Å—Ç–≤–∏–µ                      | –ú–µ—Ç–æ–¥ | –ú–∞—Ä—à—Ä—É—Ç                         |
|----|-------------------------------|--------|----------------------------------|
| 1  | –ó–∞–≥—Ä—É–∑–∫–∞ —Ñ–∞–π–ª–∞ (–æ–±—ã—á–Ω—ã–π)      | POST   | `/api/upload/file`              |
| 2  | –ó–∞–≥—Ä—É–∑–∫–∞ —Ñ–∞–π–ª–∞ (Base64)       | POST   | `/api/upload/base64`            |
| 3  | –ü–æ–ª—É—á–∏—Ç—å —Ñ–∞–π–ª –ø–æ UUID         | GET    | `/api/file/{file_unique_id}`    |
| 4  | –ü–æ–ª—É—á–∏—Ç—å —Ñ–∞–π–ª –ø–æ ID           | GET    | `/api/file/id/{id}`             |
| 5  | –ü–æ–ª—É—á–∏—Ç—å —Å–ø–∏—Å–æ–∫ —Ñ–∞–π–ª–æ–≤ –∫–ª–∏–µ–Ω—Ç–∞| GET    | `/api/files`                    |

---

## 1Ô∏è‚É£ –ó–∞–≥—Ä—É–∑–∫–∞ —Ñ–∞–π–ª–∞ (–æ–±—ã—á–Ω—ã–π)

**POST** `/api/upload/file`

### –ü–∞—Ä–∞–º–µ—Ç—Ä—ã (`form-data`):

| –ü–æ–ª–µ             | –¢–∏–ø     | –û–±—è–∑–∞—Ç–µ–ª—å–Ω—ã–π | –û–ø–∏—Å–∞–Ω–∏–µ                               |
|------------------|----------|--------------|----------------------------------------|
| `file`           | `file`   | ‚úÖ           | –ó–∞–≥—Ä—É–∂–∞–µ–º—ã–π —Ñ–∞–π–ª                       |
| `type`           | `string` | ‚úÖ           | –¢–∏–ø —Ñ–∞–π–ª–∞ (`leads`, `deals`, –∏ —Ç.–¥.)   |
| `client_code`    | `string` | ‚úÖ           | –£–Ω–∏–∫–∞–ª—å–Ω—ã–π –∫–æ–¥ –∫–ª–∏–µ–Ω—Ç–∞ (–ø–æ–¥–¥–æ–º–µ–Ω)      |
| `file_unique_id` | `string` | ‚úÖ           | –í–Ω–µ—à–Ω–∏–π UUID —Ñ–∞–π–ª–∞                     |

### –ü—Ä–∏–º–µ—Ä –æ—Ç–≤–µ—Ç–∞:

```json
{
  "id": 12,
  "file_unique_id": "ZuP2eZWcOc5wWJmT...",
  "path": "storage/app/uploads/acme123/leads/photo.jpg",
  "size": 58344
}
```

---

## 2Ô∏è‚É£ –ó–∞–≥—Ä—É–∑–∫–∞ —Ñ–∞–π–ª–∞ (Base64)

**POST** `/api/upload/base64`

### JSON –ø–∞—Ä–∞–º–µ—Ç—Ä—ã:

| –ü–æ–ª–µ            | –¢–∏–ø      | –û–±—è–∑–∞—Ç–µ–ª—å–Ω—ã–π | –û–ø–∏—Å–∞–Ω–∏–µ                                  |
|-----------------|----------|--------------|-------------------------------------------|
| `file_base64`   | `string` | ‚úÖ           | Base64-–∫–æ–¥–∏—Ä–æ–≤–∞–Ω–Ω—ã–π —Ñ–∞–π–ª                  |
| `filename`      | `string` | ‚úÖ           | –ò–º—è —Ñ–∞–π–ª–∞ —Å —Ä–∞—Å—à–∏—Ä–µ–Ω–∏–µ–º (–Ω–∞–ø—Ä–∏–º–µ—Ä, `x.jpg`)|
| `type`          | `string` | ‚úÖ           | –¢–∏–ø (`leads`, `deals` –∏ —Ç.–¥.)             |
| `client_code`   | `string` | ‚úÖ           | –£–Ω–∏–∫–∞–ª—å–Ω—ã–π –∫–æ–¥ –∫–ª–∏–µ–Ω—Ç–∞                    |
| `file_unique_id`| `string` | ‚ùå           | –í–Ω–µ—à–Ω–∏–π UUID (–µ—Å–ª–∏ –Ω–µ –ø–µ—Ä–µ–¥–∞–Ω ‚Äî –≥–µ–Ω–µ—Ä–∏—Ä—É–µ—Ç—Å—è) |

### –ü—Ä–∏–º–µ—Ä –æ—Ç–≤–µ—Ç–∞:

```json
{
  "id": 13,
  "file_unique_id": "A1B2C3D4E5F6...",
  "path": "storage/app/uploads/acme123/deals/x.jpg",
  "size": 102400
}
```

---

## 3Ô∏è‚É£ –ü–æ–ª—É—á–∏—Ç—å —Ñ–∞–π–ª –ø–æ UUID

**GET** `/api/file/{file_unique_id}`

### –ü—Ä–∏–º–µ—Ä –∑–∞–ø—Ä–æ—Å–∞:

```
GET /api/file/ZuP2eZWcOc5wWJmT...
```

### –û—Ç–≤–µ—Ç:

–§–∞–π–ª –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç—Å—è —Å –∫–æ—Ä—Ä–µ–∫—Ç–Ω—ã–º–∏ –∑–∞–≥–æ–ª–æ–≤–∫–∞–º–∏:

- `Content-Type: image/jpeg` (–∏–ª–∏ –¥—Ä—É–≥–æ–π MIME —Ç–∏–ø)
- `Content-Disposition: inline; filename="photo.jpg"`

---

## 4Ô∏è‚É£ –ü–æ–ª—É—á–∏—Ç—å —Ñ–∞–π–ª –ø–æ ID

**GET** `/api/file/id/{id}`

### –ü—Ä–∏–º–µ—Ä –∑–∞–ø—Ä–æ—Å–∞:

```
GET /api/file/id/12
```

### –û—Ç–≤–µ—Ç:

–§–∞–π–ª –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç—Å—è –∞–Ω–∞–ª–æ–≥–∏—á–Ω–æ UUID-–∑–∞–ø—Ä–æ—Å—É.

---

## 5Ô∏è‚É£ –ü–æ–ª—É—á–∏—Ç—å —Å–ø–∏—Å–æ–∫ —Ñ–∞–π–ª–æ–≤ –∫–ª–∏–µ–Ω—Ç–∞

**GET** `/api/files`

### –ü–∞—Ä–∞–º–µ—Ç—Ä—ã –∑–∞–ø—Ä–æ—Å–∞:

| –ü–∞—Ä–∞–º–µ—Ç—Ä     | –¢–∏–ø     | –û–±—è–∑–∞—Ç–µ–ª—å–Ω—ã–π | –û–ø–∏—Å–∞–Ω–∏–µ                       |
|--------------|----------|--------------|--------------------------------|
| `client_code`| `string` | ‚úÖ           | –£–Ω–∏–∫–∞–ª—å–Ω—ã–π –∫–æ–¥ –∫–ª–∏–µ–Ω—Ç–∞         |
| `type`       | `string` | ‚ùå           | –¢–∏–ø —Ñ–∞–π–ª–∞ (—Ñ–∏–ª—å—Ç—Ä –ø–æ —Ç–∏–ø—É)     |

### –ü—Ä–∏–º–µ—Ä –∑–∞–ø—Ä–æ—Å–∞:

```
GET /api/files?client_code=acme123&type=leads
```

### –ü—Ä–∏–º–µ—Ä –æ—Ç–≤–µ—Ç–∞:

```json
[
  {
    "id": 12,
    "file_unique_id": "ZuP2eZWcOc5wWJmT...",
    "type": "leads",
    "—Ä–∞–∑–º–µ—Ä": 58344,
    "–ø—É—Ç—å": "storage/app/uploads/acme123/leads/photo.jpg",
    "–∏–º—è_—Ñ–∞–π–ª–∞": "photo.jpg",
    "–¥–∞—Ç–∞_—Å–æ–∑–¥–∞–Ω–∏—è": "2025-06-13T09:12:34.000000Z"
  }
]
```

---

## üì¶ –¢–∞–±–ª–∏—Ü–∞ `client_storage`

–•—Ä–∞–Ω–∏—Ç –æ–±—â–µ–µ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ —Ö—Ä–∞–Ω–∏–ª–∏—â–∞ –∫–ª–∏–µ–Ω—Ç–æ–º.

| –ü–æ–ª–µ         | –¢–∏–ø      | –û–ø–∏—Å–∞–Ω–∏–µ                          |
|--------------|-----------|-----------------------------------|
| `client_code`| `string`  | –£–Ω–∏–∫–∞–ª—å–Ω—ã–π –∫–æ–¥ –∫–ª–∏–µ–Ω—Ç–∞            |
| `size_bytes` | `bigint`  | –°—É–º–º–∞—Ä–Ω—ã–π —Ä–∞–∑–º–µ—Ä —Ñ–∞–π–ª–æ–≤ –≤ –±–∞–π—Ç–∞—Ö  |

> –ó–Ω–∞—á–µ–Ω–∏–µ `size_bytes` –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ —É–≤–µ–ª–∏—á–∏–≤–∞–µ—Ç—Å—è –ø—Ä–∏ –∑–∞–≥—Ä—É–∑–∫–µ –∏ —É–º–µ–Ω—å—à–∞–µ—Ç—Å—è –ø—Ä–∏ —É–¥–∞–ª–µ–Ω–∏–∏ —Ñ–∞–π–ª–æ–≤.

---

## üõ† –¢–µ—Ö–Ω–æ–ª–æ–≥–∏–∏

- **–Ø–∑—ã–∫:** PHP (Laravel)
- **–ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö:** PostgreSQL
- **–•—Ä–∞–Ω–∏–ª–∏—â–µ —Ñ–∞–π–ª–æ–≤:** `storage/app/uploads/{client_code}/{type}/`
- **UUID:** –ò—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –¥–ª—è `file_unique_id`

---

## üìé –ü—Ä–∏–º–µ—á–∞–Ω–∏—è

- UUID (`file_unique_id`) –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –∫–∞–∫ –≤–Ω–µ—à–Ω–∏–π –∏–¥–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ç–æ—Ä –∏ –º–æ–∂–µ—Ç –±—ã—Ç—å –∑–∞–¥–∞–Ω –∫–ª–∏–µ–Ω—Ç–æ–º.
- –í—Å–µ —Ñ–∞–π–ª—ã —Å–æ—Ö—Ä–∞–Ω—è—é—Ç—Å—è –≤ `storage/app/uploads`.
- –•—Ä–∞–Ω–∏–ª–∏—â–µ –∫–ª–∏–µ–Ω—Ç–∞ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –æ—Ç—Å–ª–µ–∂–∏–≤–∞–µ—Ç—Å—è.
- –ü–æ–¥–¥–µ—Ä–∂–∏–≤–∞—é—Ç—Å—è –∫–∞–∫ –æ–±—ã—á–Ω—ã–µ —Ñ–∞–π–ª—ã, —Ç–∞–∫ –∏ base64.---

## üöÄ –†–∞–∑–≤—ë—Ä—Ç—ã–≤–∞–Ω–∏–µ

### üì¶ Docker

–î–ª—è –∑–∞–ø—É—Å–∫–∞ –ø—Ä–æ–µ–∫—Ç–∞ –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ Docker:

```bash
docker-compose up --build -d
```

–≠—Ç–æ —Å–æ–∑–¥–∞—Å—Ç –∏ –∑–∞–ø—É—Å—Ç–∏—Ç –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä—ã –≤ —Ñ–æ–Ω–µ —Å –ø–æ–ª–Ω—ã–º –±–∏–ª–¥–æ–º –ø—Ä–æ–µ–∫—Ç–∞.

---

## ‚úÖ –ì–æ—Ç–æ–≤–æ –∫ –ø—Ä–æ–¥–∞–∫—à–Ω-—Å—Ä–µ–¥–µ

- Laravel –Ω–∞—Å—Ç—Ä–æ–µ–Ω –¥–ª—è –ø—Ä–æ–¥–∞–∫—à–Ω-—Ä–µ–∂–∏–º–∞
- –ò—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è PostgreSQL –∫–∞–∫ –Ω–∞–¥—ë–∂–Ω–∞—è –°–£–ë–î
- –§–∞–π–ª—ã —Ö—Ä–∞–Ω—è—Ç—Å—è –≤ `storage/app/uploads`, –º–æ–∂–Ω–æ –ø–æ–¥–∫–ª—é—á–∏—Ç—å –≤–Ω–µ—à–Ω–µ–µ —Ö—Ä–∞–Ω–∏–ª–∏—â–µ (S3 –∏ —Ç.–¥.)
- –ò—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è UUID –¥–ª—è –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏ –∏–¥–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ç–æ—Ä–æ–≤ —Ñ–∞–π–ª–æ–≤
- –ü–æ–¥–¥–µ—Ä–∂–∫–∞ –º–∞—Å—à—Ç–∞–±–∏—Ä–æ–≤–∞–Ω–∏—è —á–µ—Ä–µ–∑ Docker –∏ .env-–∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—é

> üìå –í—ã –º–æ–∂–µ—Ç–µ –ª–µ–≥–∫–æ —Ä–∞–∑–≤–µ—Ä–Ω—É—Ç—å —ç—Ç–æ —Ä–µ—à–µ–Ω–∏–µ –≤ –ª—é–±–æ–π –æ–±–ª–∞—á–Ω–æ–π –∏–Ω—Ñ—Ä–∞—Å—Ç—Ä—É–∫—Ç—É—Ä–µ —Å –ø–æ–º–æ—â—å—é Docker.

# Postman API docs: 

https://documenter.getpostman.com/view/26073305/2sB2x6msLC

---


